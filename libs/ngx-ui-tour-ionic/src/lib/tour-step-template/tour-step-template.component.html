<ion-popover
    [leaveAnimation]="noopLeaveAnimation"
    [backdropDismiss]="false"
    [keyboardClose]="false"
    [showBackdrop]="false"
    [dismissOnSelect]="false"
    [style.--min-width]="step?.stepDimensions?.minWidth"
    [style.--max-width]="step?.stepDimensions?.maxWidth"
    [style.--width]="step?.stepDimensions?.width"
    [arrow]="step?.showArrow ?? true"
    [focusTrap]="step?.trapFocus ?? false"
>
    <ng-template>
        <ng-container
            *ngTemplateOutlet="
                stepTemplate || stepTemplateContent || defaultTemplate;
                context: {step: step}
            "
        ></ng-container>
    </ng-template>
</ion-popover>

<ng-template #defaultTemplate let-step="step">
    <tour-default-step-template
        [step]="step"
    />
</ng-template>
